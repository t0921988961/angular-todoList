<!-- Table 資料欄位 -->
<div class="row justify-content-center mt-5 p-5">
  <div class="card">
    <input
      type="text"
      [(ngModel)]="filter"
      (change)="filterResult(filter)"
      pInputText
    />
    <p>Show:{{ filter }}</p>
    <p>all, active, done</p>

    <ul>
      <li *ngFor="let item of todoArr">
        Id:{{ item?.tId }}<br />
        content:{{ item?.content }}<br />
        Done:{{ item?.done }}<br />
      </li>
    </ul>

    <p-table
      #dtExhibit
      [columns]="colShareList"
      [value]="shareList"
      [(selection)]="selectRow"
      selectionMode="single"
      dataKey="tID"
      styleClass="p-datatable-customers"
      [rowHover]="true"
      [rows]="10"
      [showCurrentPageReport]="true"
      [rowsPerPageOptions]="[10, 25, 50]"
      [loading]="loading"
      [paginator]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [filterDelay]="0"
    >
      <ng-template pTemplate="colgroup" let-columns>
        <colgroup>
          <col *ngFor="let col of columns" />
        </colgroup>
      </ng-template>

      <ng-template pTemplate="header" let-columns>
        <tr>
          <ng-container *ngFor="let col of columns" [ngSwitch]="col.field">
            <th scope="col" *ngSwitchDefault pSortableColumn="{{ col.field }}">
              {{ col.header }}
              <p-sortIcon field="{{ col.field }}"></p-sortIcon>
            </th>

            <th scope="col" *ngSwitchCase="'Function'">
              {{ col.header }}
            </th>
          </ng-container>
        </tr>
        <tr>
          <th scope="col" *ngFor="let col of columns" [ngSwitch]="col.field">
            <input
              *ngSwitchDefault
              pInputText
              type="text"
              placeholder="請輸入"
              (input)="applyFilterGlobal($event, 'contains')"
            />

            <div *ngSwitchCase="'Select'">
              <p-tableHeaderCheckbox
                (click)="checkSelectedTestUser()"
              ></p-tableHeaderCheckbox>
            </div>

            <div *ngSwitchCase="'Function'"></div>
          </th>
        </tr>
      </ng-template>
      <!-- 表格Body 顯示 -->
      <ng-template
        pTemplate="body"
        let-rowData
        let-columns="columns"
        let-index="rowIndex"
      >
        <tr>
          <td
            *ngFor="let col of columns"
            class="ui-resizable-column"
            [ngSwitch]="col.field"
          >
            <ng-container *ngSwitchDefault>
              {{ rowData[col.field] }}
            </ng-container>

            <ng-container *ngSwitchCase="'Select'">
              <p-tableCheckbox
                [value]="rowData"
                (click)="checkSelectedTestUser()"
              ></p-tableCheckbox>
            </ng-container>

            <ng-container *ngSwitchCase="'Function'">
              <div class="btn__action">
                <button
                  pButton
                  pRipple
                  label="編輯"
                  type="button"
                  class="p-button-ingo p-ripple mr-3"
                  (click)="updateTodo('initTodo', '1', 456789)"
                ></button>

                <button
                  pButton
                  pRipple
                  label="刪除"
                  type="button"
                  class="p-button-danger p-ripple"
                  (click)="deleteTodo('initTodo', '1')"
                ></button>
              </div>
            </ng-container>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="11" class="text-center">查無符合的項目</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>

<!-- Dailog delete Todo -->
<p-confirmDialog #cd [key]="'confirm'" [style]="{ width: '50vw' }">
  <ng-template pTemplate="footer">
    <button
      pButton
      pRipple
      label="確認"
      type="button"
      class="p-button-info p-ripple"
      (click)="cd.accept()"
    ></button>
    <button
      pButton
      pRipple
      label="取消"
      type="button"
      class="p-button-danger p-ripple"
      (click)="cd.reject()"
    ></button>
  </ng-template>
</p-confirmDialog>

<!-- Dailog edit todo -->
<p-dialog
  header="Edit Todo"
  [(visible)]="displayEdit"
  [style]="{ width: '50vw' }"
>
  <form [formGroup]="editForm">
    <div class="row">
      <label for="contentInput" class="col-sm-4 col-form-label">
        content：
      </label>
      <div class="col-sm-7">
        <input
          method="post"
          autocomlete="off"
          formControlName="content"
          id="contentInput"
          class="form-control"
          type="text"
          placeholder="請輸入..."
          pInputText
          minlength=""
          maxlength="60"
          [attr.disabled]="false ? '' : null"
        />
      </div>
    </div>
  </form>

  <ng-template pTemplate="footer">
    <button
      pButton
      pRipple
      label="確認"
      type="button"
      class="p-button-info p-ripple"
    ></button>

    <button
      pButton
      pRipple
      label="取消"
      type="button"
      class="p-button-danger p-ripple"
    ></button>
  </ng-template>
</p-dialog>
